(()=>{let e=null,t=null;const n="focus-mode-active",o="focus-mode-controls-visible",i="focus-mode-",r=`${i}album-art`,l=`${i}player-controls`,a=`${i}track-info`,c=`${i}react-root`,s={background:"rgba(255, 255, 255, 0.1)",color:"white",border:"none",borderRadius:"50%",padding:"8px",minWidth:"32px",minHeight:"32px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},d="body .Root__top-bar, body .Root__nav-bar, body .Root__main-view, body .Root__now-playing-bar, body .Root__right-sidebar",u=".main-nowPlayingView-section, .main-trackInfo-container, .main-trackList-trackList";let m=!1,y=null,p=null,f=!1,g=null,h=null,v=null;function b(){const e=Spicetify.Player.data?.item;if(!e)return y=null,void(p=null);const t=e.metadata;if(t){y=t;const e=t?.image_xlarge_url||t?.image_large_url||t?.image_url;p=e||null}else y={uri:e.uri},p=null}const x=({icon:t,onClick:n,className:o="",style:i={}})=>{const r=Spicetify.SVGIcons[t];return r?e.createElement("button",{className:`focus-mode-control-button ${o}`,onClick:n,style:{...s,...i}},r?e.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",dangerouslySetInnerHTML:{__html:r}}):e.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"rgba(255, 255, 255, 0.5)"},e.createElement("path",{d:"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8z"}))):null},k=()=>{const[t,n]=e.useState(Spicetify.Player.isPlaying()),[o,i]=e.useState(Spicetify.Player.getVolume()),[l,a]=e.useState(o),[c,s]=e.useState(.25);e.useEffect((()=>{const e=({data:e})=>{i(e),a(e)};Spicetify.Player.addEventListener("onvolumechange",e);const t=Spicetify.Player.getVolume();return i(t),a(t),()=>{Spicetify.Player.removeEventListener("onvolumechange",e)}}),[]),e.useEffect((()=>{const e=()=>n(Spicetify.Player.isPlaying());return Spicetify.Player.addEventListener("onplaypause",e),e(),()=>{Spicetify.Player.removeEventListener("onplaypause",e)}}),[]),e.useEffect((()=>{const e=document.getElementById(r);e&&(e.style.opacity=c)}),[]);return e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"15px",width:"100%",padding:"0 20px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"5px",flexBasis:"150px"}},e.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",dangerouslySetInnerHTML:{__html:Spicetify.SVGIcons.brightness||Spicetify.SVGIcons.search}}),e.createElement("input",{type:"range",min:0,max:1,step:.01,value:c,onChange:e=>{const t=parseFloat(e.target.value);s(t);const n=document.getElementById(r);n&&(n.style.opacity=t)},style:{flexGrow:1,cursor:"pointer"}})),e.createElement(x,{icon:"skip-back",onClick:Spicetify.Player.back}),e.createElement(x,{icon:t?"pause":"play",onClick:Spicetify.Player.togglePlay,style:{transform:"scale(1.1)"}}),e.createElement(x,{icon:"skip-forward",onClick:Spicetify.Player.next}),e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"5px",flexBasis:"150px"}},e.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",dangerouslySetInnerHTML:{__html:o>.5?Spicetify.SVGIcons.volume:o>0?Spicetify.SVGIcons["volume-low"]:Spicetify.SVGIcons["volume-off"]}}),e.createElement("input",{type:"range",min:0,max:1,step:.01,value:l,onChange:e=>{const t=parseFloat(e.target.value);a(t),Spicetify.Player.setVolume(t)},style:{flexGrow:1,cursor:"pointer"}})))},E=({trackData:t,albumArtUrl:n,controlsVisible:o})=>{const c=(s=n)&&s.startsWith("spotify:image:")?`https://i.scdn.co/image/${s.substring(14)}`:null;var s;const d=t?.title||"Loading...",u=t?.artist_name||"";return e.createElement("div",{id:i+"content"},c&&e.createElement("img",{id:r,src:c,alt:"Album Art"}),e.createElement("div",{id:a},e.createElement("div",{className:"track-title"},d),e.createElement("div",{className:"track-artist"},u)),e.createElement("div",{id:l},e.createElement(k,null)))};function w(){m&&v&&t.render(e.createElement(E,{trackData:y,albumArtUrl:p,controlsVisible:f}),v)}function S(){m&&(f||(f=!0,document.body.classList.add(o)),g&&clearTimeout(g),g=setTimeout((()=>{f=!1,document.body.classList.remove(o),g=null}),3e3))}function L(e){"Escape"===e.key&&m&&P()}function C(e){m&&!e.target.closest(`#${l}`)&&h&&!h.element.contains(e.target)&&P()}function $(){setTimeout((()=>{b(),m&&w()}),100)}async function _(){if(m)return;const e="focus-mode-styles";if(!document.getElementById(e)){const t=document.createElement("style");t.id=e,t.textContent=`\n    /* Hide original UI when focus mode active */\n    body.${n} ${d} {\n      opacity: 0 !important;\n      visibility: hidden !important;\n      pointer-events: none !important;\n      transition: opacity 500ms ease, visibility 500ms ease;\n    }\n    body.${n} ${u} {\n      display: none !important;\n    }\n    body.${n} { \n      overflow: hidden !important; \n      /* Cursor hidden globally removed */\n    }\n\n    /* Focus Mode Root Container - Initially hidden */\n    #${c} {\n      display: none; /* Hidden by default */\n      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;\n      z-index: 9998; \n      background-color: #000; \n      pointer-events: none; /* Initially no pointer events */\n      cursor: none; /* Hide cursor only on the background element */\n    }\n\n    /* Show and enable root container only when active */\n    body.${n} #${c} {\n        display: block;\n        pointer-events: auto; /* Enable clicks on background */\n    }\n\n    /* Album Art Styling (within React component) */\n    #${r} {\n      display: block;\n      position: absolute;\n      top: 0; left: 0;\n      width: 100%; height: 100%;\n      object-fit: contain; \n      margin: 0; padding: 0; border: none;\n    }\n\n    /* Controls Container Styling (within React component) */\n    #${l} {\n      position: absolute; \n      bottom: 0; left: 0;\n      width: 100%;\n      z-index: 10000; \n      background: rgba(0, 0, 0, 0.7); \n      padding: 16px 0; \n      pointer-events: auto; \n      opacity: 0; \n      transition: opacity 500ms ease !important;\n      display: flex; \n      justify-content: center;\n      cursor: auto !important;\n    }\n    body.${n}.${o} #${l} {\n      opacity: 1 !important;\n    }\n\n    /* Track Info Container Styling (within React component) */\n    #${a} {\n      position: absolute; \n      top: 0; left: 0;\n      width: 100%;\n      text-align: center; \n      z-index: 10000; \n      pointer-events: none; /* Let mouse events pass through */\n      opacity: 0; \n      transition: opacity 500ms ease !important;\n      background: rgba(0, 0, 0, 0.7); \n      padding: 16px; \n      color: white; \n    }\n    body.${n}.${o} #${a} {\n      opacity: 1 !important;\n    }\n    #${a} .track-title {\n      font-size: 1.2em; font-weight: bold;\n    }\n    #${a} .track-artist {\n      font-size: 1em; opacity: 0.8;\n    }\n    \n    /* Ensure cloned controls inherit necessary styles */\n    #${l} .main-nowPlayingBar-center {\n        /* Add specific overrides if needed */\n    }\n  `,document.head.appendChild(t)}m=!0,h&&(h.active=!0),document.body.classList.add(n),b(),v||(v=document.createElement("div"),v.id=c,document.body.appendChild(v)),f=!1,document.body.classList.remove(o),w(),document.addEventListener("mousemove",S),document.addEventListener("keydown",L),document.addEventListener("click",C),S()}function P(){if(!m)return f=!1,void(h&&(h.active=!1));document.removeEventListener("mousemove",S),document.removeEventListener("keydown",L),document.removeEventListener("click",C),g&&(clearTimeout(g),g=null),v&&t.unmountComponentAtNode(v),document.body.classList.remove(n),document.body.classList.remove(o);try{document.querySelectorAll(d).forEach((e=>{e instanceof HTMLElement&&(e.style.opacity="1",e.style.visibility="visible",e.style.pointerEvents="auto",e.style.display="")}))}catch(e){}m=!1,f=!1,h&&(h.active=!1),v&&(v.remove(),v=null);const e=document.getElementById("focus-mode-styles");e&&e.remove(),y=null,p=null}!function n(){for(;!(Spicetify?.React&&Spicetify?.ReactDOM&&Spicetify?.Player?.addEventListener&&Spicetify?.Playbar?.Button&&Spicetify?.showNotification);)return setTimeout(n,100);e=Spicetify.React,t=Spicetify.ReactDOM,P(),y=null,p=null,function(){if(!Spicetify?.Playbar?.Button)return;h=new Spicetify.Playbar.Button("Focus Mode",'\n    <span class="e-9800-button__icon-wrapper" aria-hidden="true">\n      <svg \n        role="img"\n        height="16"\n        width="16"\n        aria-hidden="true"\n        viewBox="0 0 128 128" \n        fill="currentColor"\n        class="e-9800-icon e-9800-baseline"\n      >\n        \n    \x3c!-- Background circle (optional, might be handled by button style) --\x3e\n    \x3c!-- <circle cx="64" cy="64" r="60" fill="#1DB954"/> --\x3e\n    \n    \x3c!-- Album art frame --\x3e\n    <rect x="32" y="32" width="64" height="64" rx="4" fill="none" stroke="currentColor" stroke-width="2"/>\n    \n    \x3c!-- Corner arrows --\x3e\n    \x3c!-- Top-left --\x3e\n    <path d="M32 48 L32 32 L48 32" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n    \n    \x3c!-- Top-right --\x3e\n    <path d="M96 48 L96 32 L80 32" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n    \n    \x3c!-- Bottom-left --\x3e\n    <path d="M32 80 L32 96 L48 96" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n    \n    \x3c!-- Bottom-right --\x3e\n    <path d="M96 80 L96 96 L80 96" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n    \n    \x3c!-- Center focus dot --\x3e\n    <circle cx="64" cy="64" r="12" fill="currentColor"/>\n  \n      </svg>\n    </span>\n  ',(e=>{m?P():_()}),!1);try{h.register()}catch(e){}}(),Spicetify.Player.addEventListener("songchange",$),setTimeout($,500)}()})();