(()=>{const t=20,n=150,e={PRIVATE_SESSION_INDICATOR:"button.main-noConnection-isNotice",MAIN_MENU:"div.main-topBar-topbarContentRight > button.main-userWidget-box",MENU_ITEM_LABEL:"span",MENU_ITEM_BUTTON:"div.main-userWidget-dropDownMenu > ul > li > button.main-contextMenu-menuItemButton",MENU_ITEM_CHECKED:"svg"};async function i(e,i){for(let o=0;o<t;o++){if(i){const t=document.querySelectorAll(e);if(t.length>0)return t}else{const t=document.querySelector(e);if(t)return t}await new Promise((t=>setTimeout(t,n)))}return null}async function o(){if(!await i(e.PRIVATE_SESSION_INDICATOR,!1)){const t=await async function(t){const n=await i(t,!1);return n.click(),n}(e.MAIN_MENU),n=await async function(t){const n=await i(e.MENU_ITEM_BUTTON,!0);for(const i of n){const n=i.querySelector(e.MENU_ITEM_LABEL);if(n&&n.textContent.trim()===t)return i}return null}("Private session");n&&(await async function(t){return!!t.querySelector(e.MENU_ITEM_CHECKED)}(n)?await t.click():await n.click())}}window.addEventListener("focus",(()=>{o()})),(async(t,e)=>{for(;!t();)await new Promise((t=>setTimeout(t,n)));await e()})((()=>Spicetify.Platform),o)})();